# Reclassify Button - UI Guide

## Where to Find It

### 1. Analytics Dashboard
```
Analytics Dashboard
  â†“
Click on any Session ID
  â†“
Session Detail Modal Opens
  â†“
Click "Classification" Tab
  â†“
See "ğŸ”„ Reclassify" Button (top right)
```

## Visual Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Session Details                                    [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Overview] [Conversations] [Classification] [...]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  Classification Details          [ğŸ”„ Reclassify]        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚                                                          â”‚
â”‚  Category:  [Digitise]                                  â”‚
â”‚  Confidence: 75%  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                  â”‚
â”‚                                                          â”‚
â”‚  Rationale:                                             â”‚
â”‚  The process involves manual collection...              â”‚
â”‚                                                          â”‚
â”‚  Category Progression:                                  â”‚
â”‚  Elimination is not appropriate...                      â”‚
â”‚                                                          â”‚
â”‚  Future Opportunities:                                  â”‚
â”‚  Once digitised, this process could...                  â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## What Happens When You Click

### Step 1: Confirmation Dialog
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Confirm Reclassification                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  Are you sure you want to reclassify       â”‚
â”‚  this session with the current decision    â”‚
â”‚  matrix?                                    â”‚
â”‚                                             â”‚
â”‚  [Cancel]              [OK]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 2: Processing
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Classification Details    [ğŸ”„ Reclassifying...]        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚                                                          â”‚
â”‚  (Button is disabled and shows loading state)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 3: Result Display

#### If Classification Changed:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… Classification Changed!                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  Original:              â†’              New:             â”‚
â”‚  [Digitise]                           [RPA]             â”‚
â”‚  Confidence: 75%                      Confidence: 82%   â”‚
â”‚  Matrix: 1.0                          Matrix: 2.0       â”‚
â”‚                                                          â”‚
â”‚  Confidence change: +7.0%                               â”‚
â”‚                                                          â”‚
â”‚  Page will reload in 3 seconds to show updated          â”‚
â”‚  classification...                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### If Classification Unchanged:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â„¹ï¸ Classification Unchanged                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  Original:              â†’              New:             â”‚
â”‚  [Digitise]                           [Digitise]        â”‚
â”‚  Confidence: 75%                      Confidence: 77%   â”‚
â”‚  Matrix: 1.0                          Matrix: 2.0       â”‚
â”‚                                                          â”‚
â”‚  Confidence change: +2.0%                               â”‚
â”‚                                                          â”‚
â”‚  Page will reload in 3 seconds to show updated          â”‚
â”‚  classification...                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 4: Auto-Reload
After 3 seconds, the page automatically reloads to show the updated classification.

## Features

### âœ… Visual Comparison
- Side-by-side view of original vs new classification
- Color-coded category badges
- Confidence percentage display
- Decision matrix version shown

### âœ… Clear Feedback
- Green box if classification changed
- Blue box if classification unchanged
- Shows confidence delta
- Auto-reload notification

### âœ… Error Handling
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âŒ Error: Failed to reclassify session                  â”‚
â”‚                                                          â”‚
â”‚  Missing AWS credentials. Please check your             â”‚
â”‚  credentials in settings.                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âœ… Accessibility
- Keyboard accessible
- Screen reader friendly
- Clear visual feedback
- Confirmation dialog prevents accidents

## Use Cases

### 1. After Updating Decision Matrix
```
1. Update decision matrix rules
2. Go to Analytics Dashboard
3. Select a session to test
4. Click Classification tab
5. Click "ğŸ”„ Reclassify"
6. Review the changes
```

### 2. Quality Assurance
```
1. User disputes a classification
2. Find the session in Analytics
3. Review the classification details
4. Click "ğŸ”„ Reclassify" to verify
5. Compare original vs new
```

### 3. Testing Improvements
```
1. Make changes to prompts or matrix
2. Select sample sessions
3. Reclassify each one
4. Measure improvement
```

## Technical Details

### What Gets Sent
```json
{
  "sessionId": "abc-123",
  "useOriginalModel": true,
  "reason": "Admin reclassification from UI",
  "provider": "bedrock",
  "awsAccessKeyId": "...",
  "awsSecretAccessKey": "..."
}
```

### What You Get Back
```json
{
  "sessionId": "abc-123",
  "reclassified": true,
  "original": {
    "category": "Digitise",
    "confidence": 0.75,
    "matrixVersion": "1.0"
  },
  "new": {
    "category": "RPA",
    "confidence": 0.82,
    "matrixVersion": "2.0"
  },
  "changed": true,
  "confidenceDelta": 0.07,
  "decisionMatrixEvaluation": {...},
  "extractedAttributes": {...}
}
```

## Credentials

The button automatically uses credentials from `sessionStorage`:
- For OpenAI: Uses `apiKey`
- For Bedrock: Uses `awsAccessKeyId`, `awsSecretAccessKey`, `awsSessionToken`, `awsRegion`

Make sure credentials are stored in `sessionStorage` under the key `llmCredentials`:
```javascript
sessionStorage.setItem('llmCredentials', JSON.stringify({
  apiKey: 'sk-...',
  // or for Bedrock:
  awsAccessKeyId: 'AKIA...',
  awsSecretAccessKey: '...',
  awsSessionToken: '...',
  awsRegion: 'us-east-1'
}));
```

## Troubleshooting

### Button Not Appearing
- Check that you're on the "Classification" tab
- Verify the session has a classification
- Refresh the page

### Reclassification Fails
- Check credentials in sessionStorage
- Verify backend is running
- Check browser console for errors
- Review backend logs

### No Changes After Reclassification
- Decision matrix may not have changed
- Same rules triggered
- Check decision matrix version in result

### Page Doesn't Reload
- Check browser console for errors
- Manually refresh the page
- Result is still saved in backend

## Best Practices

### 1. Test on Sample First
Before batch reclassifying:
- Test on 2-3 sessions first
- Review the changes
- Verify decision matrix is working as expected

### 2. Document Changes
When reclassifying:
- Note why you're reclassifying
- Record the decision matrix version
- Track which sessions were affected

### 3. Monitor Results
After reclassification:
- Check Analytics Dashboard for updated metrics
- Review agreement rates
- Verify improvements

### 4. Communicate Changes
If classifications change significantly:
- Notify stakeholders
- Explain the improvements
- Provide examples

## Future Enhancements

Planned improvements:
- [ ] Bulk reclassification (select multiple sessions)
- [ ] Reclassification history view
- [ ] Compare different models side-by-side
- [ ] Preview changes before applying
- [ ] Undo reclassification
- [ ] Export reclassification report

## Summary

The Reclassify button provides a powerful, user-friendly way to:
- âœ… Test decision matrix updates
- âœ… Verify classifications
- âœ… Compare before/after
- âœ… Ensure quality
- âœ… Continuous improvement

All from the familiar Analytics Dashboard interface!
