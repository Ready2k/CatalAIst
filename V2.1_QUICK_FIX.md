# v2.1.0 Quick Fix - 404 Error

## Problem

Getting `404 (Not Found)` on `/api/auth/users` endpoint.

## Cause

The backend container is running the old code without the new user management endpoints.

## Solution

Rebuild the backend container with the new code.

---

## Quick Fix (Automated)

```bash
./update-v2.1.sh
```

This will:
1. Stop containers
2. Rebuild backend with new endpoints
3. Rebuild frontend with new UI
4. Start services
5. Verify health

**Time:** ~2-3 minutes

---

## Manual Fix

```bash
# 1. Stop containers
docker-compose down

# 2. Rebuild backend (has new endpoints)
docker-compose build --no-cache backend

# 3. Rebuild frontend (has new UI)
docker-compose build --no-cache frontend

# 4. Start services
docker-compose up -d

# 5. Check logs
docker-compose logs -f backend

# 6. Verify health
curl http://localhost:8080/health
```

---

## Verify It Works

### 1. Check Backend Endpoints

```bash
# Get auth token first
TOKEN=$(curl -s -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"your-password"}' \
  | jq -r '.token')

# Test users endpoint
curl http://localhost:8080/api/auth/users \
  -H "Authorization: Bearer $TOKEN"

# Should return list of users (not 404)
```

### 2. Test in Browser

1. Login as admin
2. Look for "Users" button in navigation
3. Click "Users"
4. Should see user management screen (not error)

---

## Why This Happened

The Docker container was built before the new code was added. Docker containers need to be rebuilt when:
- New dependencies are added
- New routes/endpoints are added
- Code changes are made

---

## Prevention

Always rebuild after pulling new code:

```bash
git pull
docker-compose build
docker-compose restart
```

Or use the update script:

```bash
./update-v2.1.sh
```

---

## Troubleshooting

### Still Getting 404

**Check if backend rebuilt:**
```bash
# Check backend logs for new endpoints
docker-compose logs backend | grep "users"

# Should see route registration
```

**Force rebuild:**
```bash
docker-compose down
docker-compose build --no-cache --pull backend
docker-compose up -d
```

### Backend Won't Start

**Check logs:**
```bash
docker-compose logs backend
```

**Common issues:**
- Missing JWT_SECRET (add to .env)
- Port 8080 in use (stop other services)
- Build errors (check logs)

### Frontend Shows Old UI

**Rebuild frontend:**
```bash
docker-compose build --no-cache frontend
docker-compose restart frontend
```

**Clear browser cache:**
```bash
# Hard refresh
Ctrl+Shift+R (Windows/Linux)
Cmd+Shift+R (Mac)
```

---

## Summary

**Problem:** 404 on `/api/auth/users`  
**Cause:** Backend not rebuilt  
**Solution:** Run `./update-v2.1.sh`  
**Time:** 2-3 minutes

---

**After fix, you should see:**
- ✅ "Users" button in navigation (admin only)
- ✅ User management screen loads
- ✅ Can view/edit/delete users
- ✅ No 404 errors
